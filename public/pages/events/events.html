<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>RCPC Website - Events</title>

        <link rel="stylesheet" href="/resources/styles/styles.css">
        <link rel="stylesheet" href="./events.css">
        <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
        <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
        <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    </head>

    <body>
        <header><p></p></header>
        
        <div class="notification-bar">
            <div>Important announcement or notification message goes here / Insert Upcoming Events Here</div>
        </div>

        <main>
            <iframe src="https://calendar.google.com/calendar/embed?height=600&wkst=1&ctz=America%2FNew_York&showPrint=0&src=cmNwYy5ycGlAZ21haWwuY29t&src=ZW4udXNhI2hvbGlkYXlAZ3JvdXAudi5jYWxlbmRhci5nb29nbGUuY29t&color=%23039BE5&color=%230B8043"></iframe>
            <div id="events-container" class="events-grid">
                <!-- Event cards -->
            </div>
        </main>

        <footer><p></p></footer>

        <script src="/resources/components/header.js" type="text/babel"></script>
        <script src="/resources/components/footer.js" type="text/babel"></script>

        <script type="text/babel">
            function EventCard({ title, date, time, location, description }) {
                const [isHovered, setIsHovered] = React.useState(false);

                return (
                    <div 
                        className="event-card"
                        onMouseEnter={() => setIsHovered(true)}
                        onMouseLeave={() => setIsHovered(false)} >
                        {isHovered ? (
                            <div className="event-description">
                                <p>{description}</p>
                            </div>
                        ) : (
                            <div className="event-details">
                                <h3>{title}</h3>
                                <p>{date} at {time}</p>
                                <p>üìç {location}</p>
                            </div>
                        )}
                    </div>
                );
            }

            function EventsList() {
                const [events, setEvents] = React.useState([]);

                React.useEffect(() => {
                    fetch('/pages/events/events.json')
                        .then(response => response.json())
                        .then(data => setEvents(data.events))
                        .catch(error => console.error('Error loading events:', error));
                }, []);

                return (
                    <>
                        {events.map((event, index) => (
                            <EventCard
                                key={index}
                                title={event.title}
                                date={event.date}
                                time={event.time}
                                location={event.location}
                                description={event.description} />
                        ))}
                    </>
                );
            }

            ReactDOM.render(
                <EventsList />,
                document.getElementById('events-container')
            );
        </script>
    </body>
</html>
